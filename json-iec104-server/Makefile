LIB60870_HOME=lib60870/lib60870-C

PROJECT_SERVER = json-iec104-server
PROJECT_CLIENT = json-iec104-client
PROJECT_SERVER_SOURCES = json-iec104-server.c cJSON/cJSON.c
PROJECT_CLIENT_SOURCES = json-iec104-client.c cJSON/cJSON.c

include $(LIB60870_HOME)/make/target_system.mk
include $(LIB60870_HOME)/make/stack_includes.mk

CFLAGS += -Wall

all:	$(PROJECT_SERVER) $(PROJECT_CLIENT)

include $(LIB60870_HOME)/make/common_targets.mk

$(PROJECT_SERVER):	$(PROJECT_SERVER_SOURCES) $(LIB_NAME)
	$(CC) $(CFLAGS) $(LDFLAGS) -g -o $(PROJECT_SERVER) $(PROJECT_SERVER_SOURCES) $(INCLUDES) $(LIB_NAME) $(LDLIBS)

$(PROJECT_CLIENT):	$(PROJECT_CLIENT_SOURCES) $(LIB_NAME)
	$(CC) $(CFLAGS) $(LDFLAGS) -g -o $(PROJECT_CLIENT) $(PROJECT_CLIENT_SOURCES) $(INCLUDES) $(LIB_NAME) $(LDLIBS)

clean:
	rm -f $(PROJECT_SERVER) $(PROJECT_CLIENT)